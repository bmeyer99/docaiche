{
  "summary": {
    "total_tests": 15,
    "passed": 12,
    "failed": 3
  },
  "details": {
    "b1_class_integration": {
      "context7_config_exists": {
        "passed": true,
        "message": "Context7Config class instantiated successfully",
        "details": {
          "enabled": true,
          "has_ttl": true,
          "has_ingestion": true,
          "has_cache": true,
          "has_background_jobs": true
        }
      },
      "default_values": {
        "passed": true,
        "message": "Default values verification passed",
        "details": {
          "expected": {
            "enabled": true,
            "ttl.default_days": 7,
            "ttl.min_days": 1,
            "ttl.max_days": 90,
            "ingestion.batch_size": 10,
            "ingestion.sync_enabled": true,
            "cache.enabled": true,
            "cache.ttl_multiplier": 1.0,
            "background_jobs.ttl_cleanup_enabled": true
          },
          "actual": {
            "enabled": true,
            "ttl.default_days": 7,
            "ttl.min_days": 1,
            "ttl.max_days": 90,
            "ingestion.batch_size": 10,
            "ingestion.sync_enabled": true,
            "cache.enabled": true,
            "cache.ttl_multiplier": 1.0,
            "background_jobs.ttl_cleanup_enabled": true
          },
          "mismatches": {}
        }
      },
      "ttl_bounds_validation": {
        "passed": true,
        "message": "TTL bounds and multipliers validation",
        "details": {
          "bounds_validation": true,
          "multipliers_in_range": true,
          "sample_multipliers": {
            "react": 1.5,
            "vue": 1.5,
            "angular": 1.5
          }
        }
      },
      "feature_toggles": {
        "passed": true,
        "message": "Feature toggles validation",
        "details": {
          "all_boolean": true,
          "toggles": {
            "ttl.enable_tech_multipliers": true,
            "ttl.enable_doc_type_adjustments": true,
            "ttl.enable_freshness_boost": true,
            "ttl.enable_popularity_boost": true,
            "cache.enabled": true,
            "background_jobs.ttl_cleanup_enabled": true
          }
        }
      },
      "model_validation": {
        "passed": true,
        "message": "Configuration model validation",
        "details": {
          "validation_errors": [],
          "system_config_integration": true,
          "context7_in_system": true
        }
      }
    },
    "b2_environment_variables": {
      "context7_default_ttl_days": {
        "passed": true,
        "message": "CONTEXT7_TTL_DEFAULT_DAYS environment variable support",
        "details": {
          "has_override": true,
          "correct_value": true,
          "override_value": 14
        }
      },
      "multiple_env_vars": {
        "passed": true,
        "message": "Multiple Context7 environment variables",
        "details": {
          "all_passed": true,
          "individual_results": {
            "CONTEXT7_ENABLED": {
              "config_key": "context7.enabled",
              "expected": false,
              "actual": false,
              "matches": true
            },
            "CONTEXT7_TTL_MIN_DAYS": {
              "config_key": "context7.ttl.min_days",
              "expected": 2,
              "actual": 2,
              "matches": true
            },
            "CONTEXT7_TTL_MAX_DAYS": {
              "config_key": "context7.ttl.max_days",
              "expected": 180,
              "actual": 180,
              "matches": true
            },
            "CONTEXT7_INGESTION_BATCH_SIZE": {
              "config_key": "context7.ingestion.batch_size",
              "expected": 25,
              "actual": 25,
              "matches": true
            },
            "CONTEXT7_CACHE_ENABLED": {
              "config_key": "context7.cache.enabled",
              "expected": false,
              "actual": false,
              "matches": true
            },
            "CONTEXT7_TTL_TECH_PYTHON_MULTIPLIER": {
              "config_key": "context7.ttl.tech_multipliers.python",
              "expected": 3.0,
              "actual": 3.0,
              "matches": true
            },
            "CONTEXT7_BACKGROUND_TTL_CLEANUP_ENABLED": {
              "config_key": "context7.background_jobs.ttl_cleanup_enabled",
              "expected": false,
              "actual": false,
              "matches": true
            }
          }
        }
      },
      "nested_dot_notation": {
        "passed": true,
        "message": "Nested configuration via dot notation",
        "details": {
          "structure_tests": [
            {
              "test": "Root context7 key exists",
              "passed": true
            },
            {
              "test": "TTL section exists",
              "passed": true
            },
            {
              "test": "Tech multipliers section exists",
              "passed": true
            },
            {
              "test": "Deep nested value correct",
              "passed": true
            },
            {
              "test": "Boolean conversion correct",
              "passed": true
            }
          ],
          "final_config": {
            "context7": {
              "enabled": true,
              "ttl": {
                "default_days": 21,
                "tech_multipliers": {
                  "react": 2.5
                }
              },
              "ingestion": {
                "sync_enabled": false
              },
              "cache": {
                "eviction_policy": "lfu"
              },
              "background_jobs": {
                "metrics_collection_enabled": true
              }
            }
          }
        }
      },
      "type_conversion": {
        "passed": true,
        "message": "Type conversion and validation",
        "details": {
          "all_conversions_passed": true,
          "conversion_results": {
            "CONTEXT7_TTL_DEFAULT_DAYS": {
              "config_key": "context7.ttl.default_days",
              "expected_type": "int",
              "actual_type": "int",
              "expected_value": 30,
              "actual_value": 30,
              "type_correct": true,
              "value_correct": true
            },
            "CONTEXT7_TTL_TECH_PYTHON_MULTIPLIER": {
              "config_key": "context7.ttl.tech_multipliers.python",
              "expected_type": "float",
              "actual_type": "float",
              "expected_value": 2.5,
              "actual_value": 2.5,
              "type_correct": true,
              "value_correct": true
            },
            "CONTEXT7_ENABLED": {
              "config_key": "context7.enabled",
              "expected_type": "bool",
              "actual_type": "bool",
              "expected_value": true,
              "actual_value": true,
              "type_correct": true,
              "value_correct": true
            },
            "CONTEXT7_CACHE_ENABLED": {
              "config_key": "context7.cache.enabled",
              "expected_type": "bool",
              "actual_type": "bool",
              "expected_value": false,
              "actual_value": false,
              "type_correct": true,
              "value_correct": true
            },
            "CONTEXT7_CACHE_EVICTION_POLICY": {
              "config_key": "context7.cache.eviction_policy",
              "expected_type": "str",
              "actual_type": "str",
              "expected_value": "lru",
              "actual_value": "lru",
              "type_correct": true,
              "value_correct": true
            }
          }
        }
      },
      "override_behavior": {
        "passed": true,
        "message": "Environment variable override behavior",
        "details": {
          "ttl_overridden": true,
          "batch_overridden": true,
          "enabled_remains_default": true,
          "default_ttl": 7,
          "overridden_ttl": 42,
          "default_batch": 10,
          "overridden_batch": 50
        }
      }
    },
    "b3_configuration_manager": {
      "context7_loading": {
        "passed": false,
        "message": "Context7 config loading test failed: Failed to load configuration: Invalid configuration: 1 validation error for SystemConfiguration\nmcp\n  Input should be a valid dictionary or instance of MCPConfig [type=model_type, input_value=None, input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type",
        "details": {
          "error": "Failed to load configuration: Invalid configuration: 1 validation error for SystemConfiguration\nmcp\n  Input should be a valid dictionary or instance of MCPConfig [type=model_type, input_value=None, input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type"
        }
      },
      "hierarchical_loading": {
        "passed": false,
        "message": "Hierarchical loading test failed: Failed to load configuration: Invalid configuration: 1 validation error for SystemConfiguration\nmcp\n  Input should be a valid dictionary or instance of MCPConfig [type=model_type, input_value=None, input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type",
        "details": {
          "error": "Failed to load configuration: Invalid configuration: 1 validation error for SystemConfiguration\nmcp\n  Input should be a valid dictionary or instance of MCPConfig [type=model_type, input_value=None, input_type=NoneType]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type"
        }
      },
      "utility_methods": {
        "passed": true,
        "message": "Configuration utility methods (get_effective_ttl, get_cache_ttl)",
        "details": {
          "methods_work": true,
          "cache_ttl_works": true,
          "ttl_in_bounds": true,
          "base_ttl": 7,
          "tech_ttl": 14,
          "doc_type_ttl": 10,
          "fresh_ttl": 10,
          "popular_ttl": 9,
          "cache_ttl": 604800
        }
      },
      "service_restart_triggers": {
        "passed": false,
        "message": "Service restart triggers test failed: No module named 'docker'",
        "details": {
          "error": "No module named 'docker'"
        }
      },
      "hot_reloading": {
        "passed": true,
        "message": "Hot-reloading functionality",
        "details": {
          "has_watch_method": true,
          "has_watch_context": true,
          "watch_enabled": true
        }
      }
    }
  }
}