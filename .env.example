# AI Documentation Cache System - Portainer Deployment Example
# Comprehensive environment variable template for all services
# Fill in all required secrets and adjust optional settings as needed

################################################################################
# --- Application Core Settings ---
################################################################################

APP_ENVIRONMENT=production         # [required] Application environment (production, staging, development)
APP_DEBUG=false                    # [optional] Enable debug mode (true/false)
APP_LOG_LEVEL=info                 # [optional] Log level (debug, info, warning, error)
APP_API_PORT=8000                  # [optional] API service port
APP_WEB_PORT=8080                  # [optional] Web UI service port
APP_WORKERS=4                      # [optional] Number of worker processes

################################################################################
# --- Database & Caching ---
################################################################################

# PostgreSQL (primary database)
DATABASE_URL=postgresql://user:password@db:5432/docaiche    # [required] Main application database URL

# Redis configuration
REDIS_HOST=redis                      # [required] Redis server hostname
REDIS_PORT=6379                       # [required] Redis server port
REDIS_PASSWORD=changeme_redis_pw      # [required in production] Redis password (set strong value)
REDIS_DB=0                            # [optional] Redis database index
REDIS_MAX_CONNECTIONS=20              # [optional] Max Redis connections
REDIS_CONNECTION_TIMEOUT=10           # [optional] Redis connection timeout (seconds)
REDIS_SOCKET_TIMEOUT=10               # [optional] Redis socket timeout (seconds)
REDIS_MAXMEMORY=256mb                 # [optional] Redis max memory (e.g., 256mb)
REDIS_MAXMEMORY_POLICY=allkeys-lru    # [optional] Redis eviction policy
REDIS_APPENDONLY=false                # [optional] Enable Redis append-only file (AOF)
REDIS_SSL=false                       # [optional] Enable SSL for Redis
REDIS_SSL_CERT_REQS=required          # [optional] SSL certificate requirements (none, optional, required)

################################################################################
# --- Weaviate Vector Database ---
################################################################################

WEAVIATE_URL=http://weaviate:8080                 # [required] Weaviate API endpoint
WEAVIATE_API_KEY=changeme_weaviate_api_key        # [required] Weaviate API key (keep secret)

################################################################################
# --- GitHub Integration ---
################################################################################

GITHUB_API_TOKEN=changeme_github_token            # [required] GitHub API token for repo access

################################################################################
# --- AI Provider Selection ---
################################################################################

AI_PRIMARY_PROVIDER=ollama                        # [required] Primary AI provider (ollama, openai)
AI_FALLBACK_PROVIDER=                             # [optional] Fallback AI provider (ollama, openai)
AI_ENABLE_FAILOVER=false                          # [optional] Enable failover to fallback provider
AI_CACHE_TTL_SECONDS=600                          # [optional] AI response cache TTL (seconds)

################################################################################
# --- Ollama LLM Provider ---
################################################################################

AI_OLLAMA_ENDPOINT=http://ollama:11434            # [required] Ollama API endpoint
AI_OLLAMA_MODEL=llama3                            # [required] Ollama model name
AI_OLLAMA_TEMPERATURE=0.7                         # [optional] Ollama model temperature
AI_OLLAMA_MAX_TOKENS=4096                         # [optional] Ollama max tokens per response
AI_OLLAMA_TIMEOUT=30                              # [optional] Ollama request timeout (seconds)

################################################################################
# --- OpenAI-Compatible LLM Provider ---
################################################################################

AI_OPENAI_API_KEY=changeme_openai_api_key         # [required if using OpenAI] OpenAI API key (keep secret)
AI_OPENAI_MODEL=gpt-3.5-turbo                     # [optional] OpenAI model name
AI_OPENAI_TEMPERATURE=0.7                         # [optional] OpenAI model temperature
AI_OPENAI_MAX_TOKENS=4096                         # [optional] OpenAI max tokens per response
AI_OPENAI_TIMEOUT=30                              # [optional] OpenAI request timeout (seconds)
OPENAI_API_KEY=changeme_openai_api_key            # [required if using OpenAI] OpenAI API key (legacy usage)
OPENAI_API_BASE=https://api.openai.com/v1         # [optional] OpenAI-compatible API base URL

################################################################################
# --- Content Processing ---
################################################################################

CONTENT_CHUNK_SIZE_DEFAULT=1024                   # [optional] Default chunk size for content processing
CONTENT_CHUNK_SIZE_MAX=4096                       # [optional] Max chunk size for content processing
CONTENT_CHUNK_OVERLAP=128                         # [optional] Overlap between content chunks
CONTENT_QUALITY_THRESHOLD=0.7                     # [optional] Minimum quality threshold for content
CONTENT_MIN_CONTENT_LENGTH=100                    # [optional] Minimum content length for processing
CONTENT_MAX_CONTENT_LENGTH=100000                 # [optional] Maximum content length for processing

################################################################################
# --- Enrichment System ---
################################################################################

ENRICHMENT_MAX_CONCURRENT_TASKS=8                 # [optional] Max concurrent enrichment tasks
ENRICHMENT_TASK_TIMEOUT_SECONDS=120               # [optional] Enrichment task timeout (seconds)
ENRICHMENT_RETRY_DELAY_SECONDS=10                 # [optional] Delay before retrying failed enrichment (seconds)
ENRICHMENT_QUEUE_POLL_INTERVAL=5                  # [optional] Poll interval for enrichment queue (seconds)
ENRICHMENT_BATCH_SIZE=10                          # [optional] Batch size for enrichment processing
ENRICHMENT_ENABLE_RELATIONSHIP_MAPPING=false      # [optional] Enable relationship mapping in enrichment
ENRICHMENT_ENABLE_TAG_GENERATION=false            # [optional] Enable tag generation in enrichment
ENRICHMENT_ENABLE_QUALITY_ASSESSMENT=false        # [optional] Enable quality assessment in enrichment
ENRICHMENT_MIN_CONFIDENCE_THRESHOLD=0.6           # [optional] Minimum confidence threshold for enrichment

################################################################################
# --- Web UI Service ---
################################################################################

WEB_UI_DATABASE_URL=postgresql+asyncpg://user:password@db:5432/web_ui   # [required] Web UI database URL
WEBUI_SESSION_SECRET=changeme_webui_session_secret    # [required] Web UI session secret
API_URL=http://api:8000                               # [required] API endpoint for Web UI

################################################################################
# --- Security & Auth ---
################################################################################

API_AUTH_SECRET=changeme_api_auth_secret              # [required] API authentication secret
API_JWT_SECRET=changeme_api_jwt_secret                # [required] API JWT signing secret

################################################################################
# --- Weaviate Vector DB (Container Path) ---
################################################################################

VECTOR_DB_PATH=/data/vector_db                       # [required] Path for Weaviate vector DB storage

################################################################################
# --- Ollama Model (Container Path) ---
################################################################################

OLLAMA_MODEL_PATH=/models/llama3.bin                 # [optional] Path to Ollama model file
OLLAMA_API_KEY=changeme_ollama_api_key               # [optional] Ollama API key (if required)
OLLAMA_MODEL_SECRET=changeme_ollama_model_secret     # [optional] Ollama model secret (if required)

################################################################################
# --- General Legacy/Compatibility ---
################################################################################

ENVIRONMENT=production                               # [optional/legacy] General environment variable
DEBUG=false                                          # [optional/legacy] General debug flag

################################################################################
# --- Add additional variables below as needed ---
################################################################################